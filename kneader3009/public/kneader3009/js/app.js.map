{"version":3,"file":"js/app.js","mappings":"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","sources":["webpack://kneader-ui/./src/App.vue","webpack://kneader-ui/./src/App.vue?7ccd","webpack://kneader-ui/./src/views/Dashboard.vue","webpack://kneader-ui/./src/api.js","webpack://kneader-ui/./src/views/Dashboard.vue?040e","webpack://kneader-ui/./src/router/index.js","webpack://kneader-ui/./src/main.js","webpack://kneader-ui/webpack/bootstrap","webpack://kneader-ui/webpack/runtime/chunk loaded","webpack://kneader-ui/webpack/runtime/define property getters","webpack://kneader-ui/webpack/runtime/global","webpack://kneader-ui/webpack/runtime/hasOwnProperty shorthand","webpack://kneader-ui/webpack/runtime/make namespace object","webpack://kneader-ui/webpack/runtime/publicPath","webpack://kneader-ui/webpack/runtime/jsonp chunk loading","webpack://kneader-ui/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <header class=\"app-header\">\n      <div class=\"header-content\">\n        <img src=\"@/assests/SPP_logo_website.png\" alt=\"SPP Logo\" class=\"company-logo\" />\n        <h1 class=\"app-title\">Kneader Controller System</h1>\n      </div>\n    </header>\n\n    <main>\n      <router-view />\n    </main>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Arial', sans-serif;\n  background-color: #f5f5f5;\n  color: #333;\n}\n\n.app-header {\n  background-color: #2c3e50;\n  color: white;\n  padding: 1rem 2rem;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  position: relative;\n}\n\n.header-content {\n  display: flex;\n  align-items: center;\n  max-width: 1200px;\n  margin: 0 auto;\n  position: relative;\n}\n\n.company-logo {\n  height: 60px; /* Increased size */\n  width: auto;\n  /* Logo will naturally align to the left in flex container */\n}\n\n.app-title {\n  font-size: 1.8rem;\n  font-weight: bold;\n  position: absolute; /* Position absolutely to center it */\n  left: 50%;\n  transform: translateX(-50%);\n  margin: 0;\n}\n\nmain {\n  padding: 1rem;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n</style>","import { render } from \"./App.vue?vue&type=template&id=20d6e872\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=20d6e872&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"dashboard\">\n  \n<!-- ============ LOGIN SCREEN ============ -->\n<div\n  v-if=\"!token\"\n  class=\"login-container\"\n>\n  <div class=\"login-card\">\n    <!-- Simple Header -->\n    <div class=\"login-header\">\n      \n      <h1 class=\"login-subtitle\">Login to start the process</h1>\n    </div>\n\n    <!-- Login Form -->\n    <div class=\"login-form\">\n      <!-- Username Field -->\n      <div class=\"input-group\">\n        <label for=\"username\" class=\"input-label\">\n          Username\n        </label>\n        <input\n          id=\"username\"\n          v-model=\"username\"\n          type=\"text\"\n          placeholder=\"Enter your username\"\n          class=\"form-input\"\n          @keyup.enter=\"login\"\n        />\n      </div>\n\n      <!-- Password Field with Toggle -->\n      <div class=\"input-group\">\n        <label for=\"password\" class=\"input-label\">\n          Password\n        </label>\n        <div class=\"password-input-container\">\n          <input\n            id=\"password\"\n            v-model=\"password\"\n            :type=\"showPassword ? 'text' : 'password'\"\n            placeholder=\"Enter your password\"\n            class=\"form-input password-input\"\n            @keyup.enter=\"login\"\n          />\n          <button \n            type=\"button\" \n            class=\"password-toggle\"\n            @click=\"showPassword = !showPassword\"\n          >\n            <span v-if=\"showPassword\" class=\"toggle-text\">Hide</span>\n            <span v-else class=\"toggle-text\">Show</span>\n          </button>\n        </div>\n      </div>\n\n      <!-- Login Button -->\n      <div class=\"button-container\">\n        <button\n          @click=\"login\"\n          class=\"login-button\"\n          :class=\"{ 'login-button-disabled': !username || !password }\"\n          :disabled=\"!username || !password\"\n        >\n          Login\n        </button>\n      </div>\n\n      <!-- Error Message -->\n      <div v-if=\"error\" class=\"error-message\">\n        <p class=\"error-text\">{{ error }}</p>\n      </div>\n    </div>\n  </div>\n</div>\n    <!-- FIRST SCREEN: select batch type -->\n     <div v-else>\n  <div class=\"batch-panel\" v-if=\"!batchType && status.process_state === 'IDLE'\">\n    <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;\">\n      <h2 style=\"margin: 0;\">Select Batch Type</h2>\n      <button @click=\"logout\" class=\"btn btn-warning\">Logout</button>\n    </div>\n      <div style=\"display:flex; gap:20px; justify-content:center; margin-top:1rem;\">\n        <div class=\"batch-option\" @click=\"selectBatchType('master')\">\n          MASTER BATCH\n        </div>\n        <div class=\"batch-option\" @click=\"selectBatchType('compound')\">\n          COMPOUND BATCH\n        </div>\n      </div>\n    </div>\n\n    <!-- SECOND SCREEN: enter batch number -->\n<div class=\"batch-panel\" v-else-if=\"showBatchSelection\">\n  <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;\">\n    <h2 style=\"margin: 0;\">Enter Batch Number for {{ batchType }}</h2>\n    <button \n       @click=\"showCancelConfirmation = true\"  \n      class=\"btn btn-warning\" \n      style=\"padding: 0.5rem 1rem;\"\n    >\n      Cancel\n    </button>\n  </div>\n  \n  <div class=\"batch-input\" style=\"display:flex; gap:8px; align-items:center;\">\n    <input\n      type=\"text\"\n      v-model=\"enteredBatchNumber\"\n      placeholder=\"Type batch number and press Enter or Load\"\n      @keyup.enter=\"loadBatchByNumber\"\n      ref=\"batchInput\"\n      style=\"flex:1; padding:0.6rem; font-size:1rem;\"\n    />\n    <button @click=\"loadBatchByNumber\" class=\"btn\">Load</button>\n  </div>\n</div>\n<!-- Cancel Confirmation Dialog for Batch Selection -->\n<div class=\"confirmation-dialog\" v-if=\"showCancelConfirmation\">\n  <div class=\"dialog-content\">\n    <h3>Confirm Cancel</h3>\n    <p>Are you sure you want to cancel batch selection?</p>\n    <div style=\"display:flex; gap:10px; justify-content:center; margin-top:1rem;\">\n      <button @click=\"confirmCancelBatchSelection\" class=\"btn btn-warning\">Yes, Cancel</button>\n      <button @click=\"cancelCancelBatchSelection\" class=\"btn btn-primary\">No, Continue</button>\n    </div>\n  </div>\n</div>\n    \n\n    <!-- PRESCANNING PANEL -->\n    <div class=\"prescan-panel\" v-if=\"workorder && workorder.steps\">\n      <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;\">\n  <h2 style=\"margin: 0;\">{{ selectedBatch ? selectedBatch.name : workorder.name }}</h2>\n  <button \n    v-if=\"showCancelButton\" \n    @click=\"showCancelProcessConfirmation = true\" \n    class=\"btn btn-warning\" \n    :disabled=\"isCancelDisabled\"\n    style=\"padding: 0.5rem 1rem;\"\n  >\n    Cancel\n  </button>\n</div>\n\n<!-- Cancel Confirmation Dialog for Process -->\n<div class=\"confirmation-dialog\" v-if=\"showCancelProcessConfirmation\">\n  <div class=\"dialog-content\">\n    <h3>Confirm Cancel</h3>\n    <p>Are you sure you want to cancel the process?</p>\n    <div style=\"display:flex; gap:10px; justify-content:center; margin-top:1rem;\">\n      <button @click=\"confirmCancelProcess\" class=\"btn btn-warning\">Yes, Cancel</button>\n      <button @click=\"cancelCancelProcess\" class=\"btn btn-primary\">No, Continue</button>\n    </div>\n  </div>\n</div>\n\n      <!-- Status line -->\n      <div class=\"status-line\">\n        {{ getStatusMessage() }}\n      </div>\n       \n      <!-- Excel-style prescan table -->\n      <table class=\"prescan-table\">\n        <thead>\n          <tr>\n            <th>Stage No.</th>\n            <th>Item</th>\n            <th>Mixing Time</th>\n            <th>Prescan</th>\n            <th>Live Status</th>\n          </tr>\n        </thead>\n        <tbody>\n  <template v-for=\"(step, stepIndex) in status.steps\" :key=\"step.step_id || stepIndex\">\n    <tr :class=\"{ 'blinking-highlight': isNextStep(stepIndex) }\">\n      <td :rowspan=\"step.items.length\">{{ stepIndex + 1 }}</td>\n      <td>{{ step.items[0].item_id }}</td>\n\n      <td :rowspan=\"step.items.length\">\n        <span v-if=\"status.current_step_index === stepIndex &&\n                      (status.process_state === 'MIXING' || status.process_state === 'ABORTED')\">\n          {{ status.mixing_time_remaining }}s\n        </span>\n        <span v-else>\n          {{ formatMixTime(step.mix_time_sec) }}\n        </span>\n      </td>\n\n      <td>\n        <span v-if=\"getItemStatus(step.items[0].item_id).toUpperCase() === 'SCANNED'\" style=\"color: green;\">\n          SCANNED\n        </span>\n        <span v-else-if=\"getItemStatus(step.items[0].item_id).toUpperCase() === 'PENDING'\" >\n          PENDING\n        </span>\n        <span v-else-if=\"getItemStatus(step.items[0].item_id).toUpperCase() === 'DONE'\" \n        :style=\"{ color: status.process_state === 'PRESCANNING' ? 'green' : 'gray', fontWeight: 'bold' }\">\n    DONE\n  </span>\n        <span v-else>\n          {{ getItemStatus(step.items[0].item_id).toUpperCase() }}\n        </span>\n      </td>\n\n      <td>\n        <span v-if=\"stepIndex === status.current_step_index + 1 && step.items[0].live_status === 'SCANNED'\" style=\"color: orange; font-weight: bold;\">\n          SCANNED\n        </span>\n        <span v-else-if=\"step.items[0].live_status === 'READY_TO_LOAD'\" style=\"color: blue; \">\n          READY TO LOAD\n        </span>\n        <span v-else-if=\"step.items[0].live_status === 'SCANNED'\" style=\"color: orange; font-weight: bold;\">\n          SCANNED\n        </span>\n        <span v-else-if=\"step.items[0].live_status === 'MIXING'\" style=\"color: green; font-weight: bold;\">\n          MIXING\n        </span>\n        <span v-else-if=\"step.items[0].live_status === 'ABORTED'\" style=\"color: red; font-weight: bold;\">\n          ABORTED\n        </span>\n        <span v-else-if=\"step.items[0].live_status === 'DONE'\" style=\"color: gray; font-weight: bold;\">\n          DONE\n        </span>\n        <span v-else>\n          {{ (step.items[0].live_status || 'WAITING').toUpperCase() }}\n        </span>\n      </td>\n    </tr>\n\n    <tr v-for=\"item in step.items.slice(1)\" :key=\"item.item_id\" :class=\"{ 'blinking-highlight': isNextStep(stepIndex) }\">\n      <td>{{ item.item_id }}</td>\n\n      <td>\n        <span v-if=\"getItemStatus(item.item_id).toUpperCase() === 'SCANNED'\" style=\"color: green;\">\n          SCANNED\n        </span>\n        <span v-else-if=\"getItemStatus(item.item_id).toUpperCase() === 'PENDING'\" >\n          PENDING\n        </span>\n        <span v-else-if=\"getItemStatus(item.item_id).toUpperCase() === 'DONE'\" \n        :style=\"{ color: status.process_state === 'PRESCANNING' ? 'green' : 'gray', fontWeight: 'bold' }\">\n    DONE\n  </span>\n        <span v-else>\n          {{ getItemStatus(item.item_id).toUpperCase() }}\n        </span>\n      </td>\n\n      <td>\n        <span v-if=\"stepIndex === status.current_step_index + 1 && item.live_status === 'SCANNED'\" style=\"color: orange; font-weight: bold;\">\n          SCANNED\n        </span>\n        <span v-else-if=\"item.live_status === 'READY_TO_LOAD'\" style=\"color: blue; \">\n          READY TO LOAD\n        </span>\n        <span v-else-if=\"item.live_status === 'SCANNED'\" style=\"color: orange; font-weight: bold;\">\n          SCANNED\n        </span>\n        <span v-else-if=\"item.live_status === 'MIXING'\" style=\"color: green; font-weight: bold;\">\n          MIXING\n        </span>\n        <span v-else-if=\"item.live_status === 'ABORTED'\" style=\"color: red; font-weight: bold;\">\n              ABORTED\n            </span>\n        \n        <span v-else-if=\"item.live_status === 'DONE'\" style=\"color: gray; font-weight: bold;\">\n          DONE\n        </span>\n        <span v-else>\n          {{ (item.live_status || 'WAITING').toUpperCase() }}\n        </span>\n      </td>\n    </tr>\n  </template>\n</tbody>\n      </table>\n\n      <!-- Scanner Panel -->\n      <div class=\"scanner-panel\">\n        <!-- Prescan Input -->\n        <div v-if=\"status.process_state === 'PRESCANNING'\">\n          <h3>Scan Item (Prescan)</h3>\n          <input\n            type=\"text\"\n            v-model=\"barcode\"\n            placeholder=\"Scan item barcode (prescan)\"\n            @keyup.enter=\"handlePrescan\"\n            ref=\"barcodeInput\"\n          />\n        </div>\n\n        <!-- Actual Scan Input -->\n        <div v-else-if=\"status.process_state === 'WAITING_FOR_ITEMS' || status.process_state === 'MIXING'\">\n          <h3>Scan Item (Actual)</h3>\n          <input\n            type=\"text\"\n            v-model=\"barcode\"\n            placeholder=\"Scan item barcode (actual)\"\n            @keyup.enter=\"handleScan\"\n            ref=\"barcodeInput\"\n          />\n        </div>\n       \n\n\n\n       <!-- Abort / Resume / Complete Abort Buttons -->\n<div class=\"control-buttons\" style=\"margin-top: 1rem; text-align: center;\">\n  <!-- Simple Abort button that triggers confirmation -->\n  <button\n    v-if=\"['MIXING'].includes(status.process_state)\"\n    @click=\"abortProcess\"\n    class=\"btn btn-danger\"\n  >\n    Abort\n  </button>\n\n  <!-- After aborted: show Resume + Complete Abort -->\n  <div v-if=\"status.process_state === 'ABORTED'\" style=\"display:flex; gap:10px; justify-content:center;\">\n    <button @click=\"resumeProcess\" class=\"btn btn-success\">\n      Resume\n    </button>\n    <button @click=\"completeAbortProcess\" class=\"btn btn-warning\">\n      Stop the process\n    </button>\n  </div>\n</div>\n\n      </div>\n    </div>\n    <!-- Wrong Stage Item Dialog -->\n<div class=\"confirmation-dialog\" v-if=\"showWrongStagePopup\">\n  <div class=\"dialog-content\">\n    <h3>Wrong Stage Item!</h3>\n    <p>{{ wrongStageMessage }}</p>\n    <button @click=\"closeWrongStagePopup\" class=\"btn btn-primary\">OK</button>\n  </div>\n</div>\n <!-- Add the new Early Scanning Wrong Item Dialog -->\n    <div class=\"confirmation-dialog\" v-if=\"showEarlyScanningWrongItemPopup\">\n      <div class=\"dialog-content\">\n        <h3>Wrong Item for Next Stage!</h3>\n        <p>{{ earlyScanningWrongItemMessage }}</p>\n        <button @click=\"closeEarlyScanningWrongItemPopup\" class=\"btn btn-primary\">OK</button>\n      </div>\n    </div>\n<div class=\"confirmation-dialog\" v-if=\"showDuplicateScanPopup\">\n  <div class=\"dialog-content\">\n    <h3>Duplicate Scanning!</h3>\n    <p>{{ duplicateScanMessage }}</p>\n    <button @click=\"closeDuplicateScanPopup\" class=\"btn btn-primary\">OK</button>\n  </div>\n</div>\n\n\n    <!-- Confirmation Dialog -->\n    <div class=\"confirmation-dialog\" v-if=\"showPrescanCompletePopup\">\n      <div class=\"dialog-content\">\n        <h3>Pre-scanning Complete!</h3>\n        <p>All items have been scanned successfully.</p>\n        <button @click=\"confirmPrescan\" class=\"btn btn-primary\">OK</button>\n      </div>\n    </div>\n    <!-- Wrong Item Scanned Dialog -->\n<div class=\"confirmation-dialog\" v-if=\"showWrongItemPopup\">\n  <div class=\"dialog-content\">\n    <h3>Wrong Item Scanned!</h3>\n    <p>{{ wrongItemMessage }}</p>\n    <button @click=\"closeWrongItemPopup\" class=\"btn btn-primary\">OK</button>\n  </div>\n</div>\n<!-- Abort Confirmation Dialog -->\n<div class=\"confirmation-dialog\" v-if=\"showAbortConfirmationPopup\">\n  <div class=\"dialog-content\">\n    <h3>Confirm Abort</h3>\n    <p>Are you sure you want to abort the process?</p>\n    <div style=\"display:flex; gap:10px; justify-content:center; margin-top:1rem;\">\n      <button @click=\"confirmAbort\" class=\"btn btn-danger\">Yes, Abort</button>\n      <button @click=\"cancelAbort\" class=\"btn btn-primary\">No, Continue</button>\n    </div>\n  </div>\n</div>\n<!-- Save Workorder Popup  -->\n<div class=\"confirmation-dialog\" v-if=\"showSavePopup\">\n  <div class=\"dialog-content\">\n    <h3>Save Workorder</h3>\n    <p>The process is complete. Would you like to save this workorder?</p>\n    <div style=\"display:flex; gap:10px; justify-content:center; margin-top:1rem;\">\n      <button @click=\"handleSaveWorkorder\" class=\"btn btn-success\">SAVE</button>\n      \n    </div>\n  </div>\n</div>\n\n    <!-- Process Complete Dialog -->\n    <div class=\"completion-popup\" v-if=\"showCompletionPopup\">\n      <div class=\"popup-content\">\n        <h3>Process Complete!</h3>\n        <button @click=\"handleCompletionOk\" class=\"btn btn-primary\">OK</button>\n      </div>\n    </div>\n\n  </div>\n</div>\n</template>\n<script>\nimport {\n  login,\n  getStatus,\n  scanItem,\n  abortProcess,\n  resetController,\n  resetProcess,\n  getWorkorders,\n  checkTransitions,\n  resumeProcess,\n  getBatches,\n  loadWorkorder,\n  confirmPrescanAPI,\n  confirmCompletion,\n  prescanItem,\n  saveWorkorder,\n  completeAbortProcess,\n   cancelProcess \n} from '@/api'\n\nexport default {\n  name: 'Dashboard',\n  data() {\n    return {\n    username: \"\",\n      password: \"\",\n      showPassword: false,\n      token: localStorage.getItem(\"token\")||null,\n      showLogin: !localStorage.getItem(\"token\"),\n      error: \"\",\n      kneaderStatus: {},\n      showSavePopup: false,\n      showCancelConfirmation: false,\n      showCancelProcessConfirmation: false,\n      showEarlyScanningWrongItemPopup: false,\n      earlyScanningWrongItemMessage: '',\n      showAbortConfirmationPopup: false,\n      batchType: null,  // \"master\" or \"compound\"\n      showPrescanCompletePopup: false,\n      showCompletionPopup: false,\n      showWrongItemPopup: false,\n      wrongItemMessage: '',\n      showWrongStagePopup: false,\n    wrongStageMessage: '',\n      showConfirmPopup: false,\n      batches: [],\n      enteredBatchNumber: '',\n      selectedBatch: null,\n      workorder: null,\n      showBatchSelection: true,\n      showPrescanning: false,\n      prescanResults: {}, \n      showDuplicateScanPopup: false,\n      duplicateScanMessage: '',\n      prescanComplete: false,\n      actualScanning: false,\n      mixing: false,\n      mixingTimer: 0,\n      mixingInterval: null,\n      scannedItems: [],\n      status: {\n        process_state: 'IDLE',\n        lid_open: true,\n        motor_running: false,\n        current_step_index: -1,\n        current_item_index: -1,\n        mixing_time_remaining: 0,\n        error_message: '',\n        workorder_id: null,\n        total_steps: 0\n      },\n      workorders: [],\n      currentWorkorder: null,\n      barcode: '',\n      scanResult: null,\n      debugMode: false,\n      statusInterval: null,\n      transitionInterval: null,\n      showingCompletion: false,\n      autoTransitionTimeout: null,\n\n      hasShownSavePopup: false,\n      hasShownCompletionPopup: false\n    }\n  },\n  computed: {\n    scannedItemsCount() {\n      return this.scannedItems.length;\n    },\n    currentStepItems() {\n      if (this.status.steps && this.status.current_step_index < this.status.steps.length) {\n        return this.status.steps[this.status.current_step_index].items || [];\n      }\n      return [];\n    },\n   // Show cancel button only during first stage waiting/ready states and prescan\nshowCancelButton() {\n  const showStates = [\n    'PRESCANNING', \n    'PRESCAN_COMPLETE', \n    'IDLE'\n  ];\n  \n  // For WAITING_FOR_ITEMS and READY_TO_LOAD, only show during first stage (stage 1)\n  if (['WAITING_FOR_ITEMS', 'READY_TO_LOAD'].includes(this.status.process_state)) {\n    return this.status.current_step_index === 0; // Only stage 1 (index 0)\n  }\n  \n  return this.showBatchSelection || showStates.includes(this.status.process_state);\n},\n\n// Enable cancel button - only during first stage waiting/ready and prescan states\nisCancelDisabled() {\n  // Always enable during prescan states\n  if (['PRESCANNING', 'PRESCAN_COMPLETE', 'IDLE'].includes(this.status.process_state)) {\n    return false;\n  }\n  \n  // For WAITING_FOR_ITEMS and READY_TO_LOAD, only enable during first stage\n  if (['WAITING_FOR_ITEMS', 'READY_TO_LOAD'].includes(this.status.process_state)) {\n    // For first stage, always enable cancel (regardless of scan status)\n    if (this.status.current_step_index === 0) {\n      return false; // Always enable cancel during stage 1\n    }\n    // For other stages, disable cancel\n    return true;\n  }\n  \n  // Disable during all other processing states\n  const disabledStates = [\n    'MIXING', \n    'ABORTED',\n    'WAITING_FOR_LID_CLOSE',\n    'WAITING_FOR_MOTOR_START',\n    'PROCESS_COMPLETE'\n  ];\n  return disabledStates.includes(this.status.process_state);\n},\n    totalItemsCount() {\n      if (!this.workorder || !this.workorder.steps) return 0;\n      return this.workorder.steps.reduce((total, step) => total + (step.items ? step.items.length : 0), 0);\n    },\n    prescanProgress() {\n      if (this.totalItemsCount === 0) return 0;\n      return Math.round((this.scannedItemsCount / this.totalItemsCount) * 100);\n    },\n    canScan() {\n      return this.status.process_state === 'WAITING_FOR_ITEMS' || \n             this.status.process_state === 'PRESCANNING';\n    },\n    blinkingStageIndex() {\n    if (this.status.process_state === 'MIXING') {\n      return this.status.current_step_index + 1;\n    }\n    return -1;\n  }\n  },\n  async mounted() {\n  console.log('Mounted, checking backend state');\n  this.token = localStorage.getItem(\"token\");\n  \n  // Only proceed if user is logged in\n  if (!this.token) {\n    console.log(\"No token found, staying on login screen\");\n    //this.showLogin = true;\n    return;\n  }\n  \n  // Test the token first\n  try {\n    console.log(\"Testing token validity...\");\n    await getStatus();\n    //const testResponse = await getStatus();\n    console.log(\"Token is valid, proceeding...\");\n    //this.showLogin = false;\n  } catch (error) {\n    console.error(\"Token validation failed:\", error);\n    if (error.message.includes('401') || error.message.includes('Missing Authorization')) {\n      console.log(\"Token invalid or expired, forcing logout\");\n      this.logout();\n      return;\n    }\n  }\n  \n  // Rest of your mounted() code...\n  const savedType = localStorage.getItem('lastBatchType');\n  const savedBatch = localStorage.getItem('lastBatchNumber');\n  \n  if (savedType) {\n    this.batchType = savedType;\n  }\n  \n  if (savedBatch) {\n    this.enteredBatchNumber = savedBatch;\n  }\n  \n  try {\n    const statusResp = await getStatus();\n    this.status = statusResp;\n    \n    // convert \"120 secs\"  120\nfunction parseSeconds(mixingTime) {\n  if (mixingTime == null) return null;\n  if (typeof mixingTime === 'number') return Math.floor(mixingTime);\n  const m = String(mixingTime).match(/(\\d+)/);\n  return m ? parseInt(m[1], 10) : null;\n}\n\nif (!this.workorder) {\n\n  // CASE 1: backend already returns workorder-style steps\n  if (statusResp.steps?.length) {\n    this.workorder = {\n      name: statusResp.workorder_name,\n      steps: statusResp.steps\n    };\n  }\n\n  // CASE 2: backend returns sequence_steps (your current format)\n  else if (statusResp.sequence_steps?.length) {\n    const steps = statusResp.sequence_steps.map((s, idx) => ({\n      step_id: idx + 1,\n      mix_time_sec: parseSeconds(s.mixing_time),\n      items: (s.items || []).map(it => ({\n        item_id: String(it),\n        name: null,\n        required_weight: null\n      }))\n    }));\n\n    this.workorder = {\n      name: statusResp.workorder_name || `Workorder ${statusResp.batch_no || ''}`,\n      steps\n    };\n  }\n}\n\n\n    this.batchType = statusResp.workorder_type || this.batchType;\n\n    if (statusResp.process_state === 'IDLE') {\n      if (this.batchType && !this.workorder) {\n        this.showBatchSelection = true;\n        this.showPrescanning = false;\n      } else if (this.workorder) {\n        this.showBatchSelection = false;\n        this.showPrescanning = true;\n      } else {\n        this.showBatchSelection = false;\n        this.showPrescanning = false;\n      }\n    } else {\n      this.showBatchSelection = false;\n      this.showPrescanning = true;\n    }\n\n  } catch (err) {\n    console.error(\"Error checking controller state:\", err);\n    if (err.response && (err.response.status === 401 || err.response.status === 422)) {\n      this.logout();\n      return;\n    }\n    if (this.batchType) {\n      this.showBatchSelection = true;\n      this.showPrescanning = false;\n    }\n  }\n\n  // Load data with error handling\n  try {\n    await this.loadBatches();\n  } catch (err) {\n    console.error('Failed to load batches:', err);\n  }\n  \n  try {\n    await this.loadWorkorders();\n  } catch (err) {\n    console.error('Failed to load workorders:', err);\n  }\n  \n  if (this.token) {\n    this.startPolling();\n  }\n\n  this.$nextTick(() => {\n    if (this.showBatchSelection && this.$refs.batchInput) {\n      this.$refs.batchInput.focus();\n    } else if (this.showPrescanning && this.$refs.barcodeInput) {\n      this.$refs.barcodeInput.focus();\n    }\n  });\n},\n  beforeUnmount() {\n    if (this.autoTransitionTimeout) {\n      clearTimeout(this.autoTransitionTimeout);\n    }\n    this.stopPolling();\n  },\n  watch: {\n    'status.process_state'(newState) {\n      if (newState === 'PROCESS_COMPLETE') {\n        this.showingCompletion = true;\n        this.scanResult = null;\n        this.barcode = '';\n        setTimeout(() => { this.showingCompletion = false; }, 5000);\n      } else if (newState === 'IDLE') {\n        this.scanResult = null;\n        this.barcode = '';\n      }\n    },\n    enteredBatchNumber(newVal) {\n    if (newVal.trim() !== '') {\n      localStorage.setItem('lastBatchNumber', newVal.trim());\n    }\n  },\n    prescanComplete(newVal) {\n      if (newVal) {\n        this.initiateAutoTransition();\n      }\n    }\n  },\n  methods: {\n  async login() {\n  this.error = \"\";\n  try {\n    const res = await login(this.username, this.password);\n    console.log(\"Login response:\", res);\n\n    if (res.token) {\n      // Save token and switch to main app\n      localStorage.setItem(\"token\", res.token);\n      this.token = res.token;\n      \n      console.log(\"Token stored in localStorage:\", localStorage.getItem(\"token\"));\n      console.log(\"Token length:\", res.token.length);\n\n      // Hide login and go to batch selection\n      this.showBatchSelection = false;\n      this.batchType = null;\n      this.status = { process_state: \"IDLE\" };\n\n      //  START POLLING AFTER LOGIN\n      this.startPolling();\n\n      //  Force a status check to update the UI\n      try {\n        await this.updateStatus();\n      } catch (err) {\n        console.error(\"Initial status check failed:\", err);\n      }\n\n      console.log(\" Login successful  moving to batch type selection\");\n      console.log(\"Current state - showBatchSelection:\", this.showBatchSelection);\n      console.log(\"Current state - showPrescanning:\", this.showPrescanning);\n      console.log(\"Current state - batchType:\", this.batchType);\n      \n    } else {\n      this.error = \"Invalid ERPNext credentials\";\n    }\n  } catch (err) {\n    console.error(\"Login error:\", err);\n    this.error = \"Login failed. Please check your credentials.\";\n  }\n},\n  logout() {\n  console.log(\"Logging out...\");\n  \n  // Clear all localStorage items\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem('lastBatchType');\n  localStorage.removeItem('lastBatchNumber');\n  \n  // Reset all component state\n  this.token = null;\n  this.username = \"\";\n  this.password = \"\";\n  this.error = \"\";\n  this.batchType = null;\n  this.enteredBatchNumber = '';\n  this.selectedBatch = null;\n  this.workorder = null;\n  this.showBatchSelection = false;\n  this.showPrescanning = false;\n  this.scannedItems = [];\n  \n  // Reset status\n  this.status = {\n    process_state: 'IDLE',\n    lid_open: true,\n    motor_running: false,\n    current_step_index: -1,\n    current_item_index: -1,\n    mixing_time_remaining: 0,\n    error_message: '',\n    workorder_id: null,\n    total_steps: 0\n  };\n  \n  //  STOP POLLING PROPERLY\n  this.stopPolling();\n  \n  console.log(\"Logout successful - returned to login screen\");\n},\n    // Show confirmation popup instead of direct cancellation\n  showCancelConfirmationPopup() {\n    this.showCancelConfirmation = true;\n  },// User confirms cancellation\n  confirmCancelBatchSelection() {\n  console.log(\"User confirmed batch selection cancellation\");\n  \n  // Reset frontend state\n  this.batchType = null;\n  this.enteredBatchNumber = '';\n  this.selectedBatch = null;\n  this.workorder = null;\n  this.scannedItems = [];\n  \n  // Remove localStorage\n  localStorage.removeItem('lastBatchType');\n  localStorage.removeItem('lastBatchNumber');\n  \n  // Update screen state\n  this.showBatchSelection = false;\n  this.showPrescanning = false;\n  this.showCancelConfirmation = false;\n  \n  console.log(\"Batch selection cancelled - back to batch type selection\");\n},\n\n  // User chooses to continue (No button)\n  cancelCancelBatchSelection() {\n    console.log(\"User cancelled the cancellation\");\n    this.showCancelConfirmation = false;\n    // Focus back on the input field\n    this.$nextTick(() => {\n      if (this.$refs.batchInput) this.$refs.batchInput.focus();\n    });\n  },\nconfirmCancelProcess() {\n    this.showCancelProcessConfirmation = false;\n    this.cancelProcess(); // Call your existing cancelProcess method\n  },\n\n  cancelCancelProcess() {\n    this.showCancelProcessConfirmation = false;\n    this.$nextTick(() => {\n      if (this.$refs.barcodeInput) this.$refs.barcodeInput.focus();\n    });\n  },\n    isNextStep(stepIndex) {\n      if (this.status.process_state !== 'MIXING') return false;\n      if (stepIndex !== this.status.current_step_index + 1) return false;\n      if (stepIndex >= this.status.steps.length) return false;\n      return !this.isStepFullyScanned(stepIndex);\n    },\n    isStepFullyScanned(stepIndex) {\n      const step = this.status.steps[stepIndex];\n      if (!step || !step.items) return false;\n      return step.items.every(item => item.live_status === 'SCANNED');\n    },\n    selectBatchType(type) {\n  this.batchType = type;  \n  localStorage.setItem('lastBatchType', type);     \n  this.showBatchSelection = true;\n  this.showPrescanning = false;\n  \n  // Focus on batch input when transitioning to batch number entry\n  this.$nextTick(() => {\n    if (this.$refs.batchInput) this.$refs.batchInput.focus();\n  });\n},\n\n    async loadBatches() {\n      try {\n        const response = await getBatches();\n        this.batches = response;\n        console.log('Loaded batches:', this.batches);\n      } catch (error) {\n        console.error('Failed to load batches:', error);\n      }\n    },\n    closeWrongItemPopup() {\n    this.showWrongItemPopup = false;\n    this.wrongItemMessage = '';\n    this.barcode = '';\n    this.$nextTick(() => { \n      if (this.$refs.barcodeInput) this.$refs.barcodeInput.focus(); \n    });\n  },\n  getStatusMessage() {\n  // Guard: if no steps yet, just return empty string\n  if (!this.workorder || !this.workorder.steps) {\n    return '';\n  }\n  const currentStage = this.status.current_step_index + 1;\n  const nextStage = currentStage + 1;\n  \n  switch (this.status.process_state) {\n    case 'READY_TO_LOAD':\n      return `Add Stage ${currentStage} items to the kneader`;\n    \n    case 'IDLE': return 'Prescan';\n    case 'PRESCANNING': return 'Prescanning in progress';\n    case 'PROCESS_COMPLETE': return ' Process Complete!';\n    \n    case 'WAITING_FOR_ITEMS': \n      // Check if current stage has items ready to load\n      if (this.isStepReadyToLoad(this.status.current_step_index)) {\n        return `Load stage - ${currentStage} items`;\n      }\n      return `Enter the item code for Stage ${currentStage}`;\n      \n    case 'MIXING':\n      // Check if next stage has items ready to load during mixing\n      if (this.isStepReadyToLoad(this.status.current_step_index + 1)) {\n        return `Load stage - ${nextStage} items`;\n      }\n      \n      if (this.workorder && this.status.current_step_index < this.workorder.steps.length - 1) {\n        return `Mixing Stage ${currentStage}, scan Stage ${nextStage} items`;\n      } else {\n        return `Mixing Stage ${currentStage}`;\n      }\n      \n    case 'WAITING_FOR_MOTOR_START': return 'Waiting for motor to start';\n    case 'ABORTED': return ' Process Aborted. Click Resume to continue';\n    default: return '';\n  }\n},\ngetRemainingReadyTime() {\n  \n  \n  return '10'; \n},\nasync loadBatchByNumber() {\n  console.log('loadBatchByNumber called with:', this.enteredBatchNumber);\n  const bn = (this.enteredBatchNumber || '').trim();\n  if (!bn) return;\n\n  //  New batch: reset completion popups & flags\n  this.showSavePopup = false;\n  this.showCompletionPopup = false;\n  this.hasShownSavePopup = false;\n  this.hasShownCompletionPopup = false;\n\n  try {\n    // <-- send payload the backend expects\n    const response = await loadWorkorder({ batch_no: bn });\n    console.log('[DEBUG] loadWorkorder response:', response);\n\n    // unify error handling (old style or new style)\n    if (response && (response.error || response.status === 'error')) {\n      const msg = response.error || response.message || 'Failed to load batch';\n      this.scanResult = { status: 'error', message: msg };\n      return;\n    }\n\n    // --- Unified success handling: accept either workorder OR sequence_steps ---\n    if (response && response.workorder) {\n      // backend already returned a workorder shape\n      this.scannedItems = [];\n      this.prescanResults = {};\n      this.workorder = response.workorder;\n      const returnedBatch = response.batch_number || bn;\n      this.selectedBatch = { batch_number: returnedBatch, name: response.workorder.name || returnedBatch };\n    }\n    else if (response && response.sequence_steps) {\n      // backend returned sequence_steps  convert to workorder.steps\n      function parseSeconds(mixingTime) {\n        if (mixingTime == null) return null;\n        if (typeof mixingTime === 'number') return Math.floor(mixingTime);\n        const m = String(mixingTime).match(/(\\d+)/);\n        return m ? parseInt(m[1], 10) : null;\n      }\n\n      const steps = (response.sequence_steps || []).map((s, idx) => ({\n        step_id: idx + 1,\n        mix_time_sec: parseSeconds(s.mixing_time),\n        items: (s.items || []).map(it => ({ item_id: String(it), name: null, required_weight: null }))\n      }));\n\n      // apply into UI state exactly like existing flow\n      this.scannedItems = [];\n      this.prescanResults = {};\n      this.workorder = { name: response.workorder?.name || `Workorder ${response.batch_no || bn}`, steps };\n      const returnedBatch = response.batch_no || bn;\n      this.selectedBatch = { batch_number: returnedBatch, name: this.workorder.name || returnedBatch };\n    }\n    else {\n      // Unexpected response shape or error\n      const msg = response && (response.message || response.error) ? (response.message || response.error) : 'Failed to load workorder';\n      this.scanResult = { status: 'error', message: msg };\n      return;\n    }\n\n    // Continue the existing UI flow after successful load\n    this.showBatchSelection = false;\n    this.showPrescanning = true;\n    this.prescanComplete = false;\n\n    // Save batch number to localStorage\n    localStorage.setItem('lastBatchNumber', this.selectedBatch.batch_number || bn);\n\n    //  FORCE STATUS UPDATE TO GET LATEST DATA\n    await this.updateStatus();\n\n    this.$nextTick(() => {\n      if (this.$refs.barcodeInput) this.$refs.barcodeInput.focus();\n    });\n\n  } catch (err) {\n    console.error('Failed to load batch:', err);\n    this.scanResult = { status: 'error', message: 'Failed to load batch' };\n  }\n},\n\nasync completeAbortProcess() {\n  console.log('Complete Abort button clicked');\n  try {\n    const response = await completeAbortProcess();\n    console.log('Complete Abort API response:', response);\n    \n    if (response && response.status === 'success') {\n      console.log('Complete Abort successful, resetting frontend state');\n      // Reset frontend state\n      this.status = { \n        process_state: 'IDLE',\n        lid_open: true,\n        motor_running: false,\n        current_step_index: -1,\n        current_item_index: -1,\n        mixing_time_remaining: 0,\n        error_message: '',\n        workorder_id: null,\n        total_steps: 0\n      };\n      this.batchType = null;\n      localStorage.removeItem('lastBatchType');\n      localStorage.removeItem('lastBatchNumber');\n\n      this.showBatchSelection = true;\n      this.showPrescanning = false;\n      this.workorder = null;\n      this.enteredBatchNumber = '';\n      this.scannedItems = [];\n      \n      this.scanResult = { \n        status: 'success', \n        message: 'Process completely aborted and reset to IDLE' \n      };\n    } else {\n      console.log('Complete Abort failed:', response);\n      this.scanResult = { \n        status: 'error', \n        message: response?.message || 'Failed to completely abort' \n      };\n    }\n  } catch (error) {\n    console.error('Complete Abort API call failed:', error);\n    this.scanResult = { \n      status: 'error', \n      message: 'Failed to completely abort process' \n    };\n  }\n},\ncloseEarlyScanningWrongItemPopup() {\n      this.showEarlyScanningWrongItemPopup = false;\n      this.earlyScanningWrongItemMessage = '';\n      this.barcode = '';\n      this.$nextTick(() => { \n        if (this.$refs.barcodeInput) this.$refs.barcodeInput.focus(); \n      });\n    },\n    getItemStatus(itemId) {\n  // strictly prescan status only\n  if (this.status.prescan_status && this.status.prescan_status.status_by_stage) {\n    for (let stage in this.status.prescan_status.status_by_stage) {\n      const item = this.status.prescan_status.status_by_stage[stage].items.find(i => i.item_id === itemId);\n      if (item) {\n        return item.prescan_status.toLowerCase(); // \"scanned\" / \"pending\"\n      }\n    }\n  }\n  return 'pending';\n},\n\n\n\n    getActualItemStatus(itemId, stepIndex) {\n  if (stepIndex < this.status.current_step_index) return 'done';\n  if (stepIndex > this.status.current_step_index) return 'waiting';\n\n  // Inside current step\n  if (this.status.scanned_items && this.status.scanned_items.includes(itemId)) {\n    return 'done';\n  }\n\n  // The next item expected\n  const currentItem = this.workorder.steps[this.status.current_step_index]\n    .items[this.status.current_item_index];\n  if (currentItem && currentItem.item_id === itemId) {\n    return 'in-progress';\n  }\n\n  return 'waiting';\n},\ngetItemStatus(itemId) {\n  if (this.status.process_state === 'PRESCANNING') {\n    if (this.status.prescan_status && this.status.prescan_status.status_by_stage) {\n      for (let stage in this.status.prescan_status.status_by_stage) {\n        const item = this.status.prescan_status.status_by_stage[stage].items.find(i => i.item_id === itemId);\n        if (item) {\n          // map \"scanned\"  \"done\"\n          if (item.prescan_status.toLowerCase() === 'scanned') {\n            return 'done';\n          }\n          return item.prescan_status.toLowerCase();\n        }\n      }\n    }\n    return 'pending';\n  }\n\n  // After prescan confirmed, everything should stay as \"done\"\n  if (this.status.prescan_complete || this.showPrescanCompletePopup === false) {\n    return 'done';\n  }\n\n  return 'pending';\n},\n\n   \n\n    async handlePrescan() {\n  if (!this.barcode.trim()) return;\n  try {\n    const result = await prescanItem(this.barcode.trim());\n    if (result && result.status === 'success') {\n      this.prescanResults[this.barcode.trim()] = 'done';\n      if (!this.scannedItems.includes(this.barcode.trim())) {\n        this.scannedItems.push(this.barcode.trim());\n      }\n      this.markPrescanCompleteIfDone();\n      this.scanResult = result;\n    } else if (result && result.status === 'error') {\n      // Check if it's a duplicate scan error\n      if (result.message && result.message.includes('already scanned')) {\n        // Show duplicate scan popup\n        this.duplicateScanMessage = result.message || 'This item has already been scanned.';\n        this.showDuplicateScanPopup = true;\n        this.scanResult = null;\n      } else {\n        // Show wrong item popup\n        this.wrongItemMessage = result.message || 'This item does not belong to the current workorder.';\n        this.showWrongItemPopup = true;\n        this.scanResult = null;\n      }\n    } else {\n      this.scanResult = result;\n    }\n    \n    this.barcode = '';\n    this.$nextTick(() => { if (this.$refs.barcodeInput) this.$refs.barcodeInput.focus(); });\n  } catch (error) {\n    console.error('Failed to prescan item:', error);\n    this.scanResult = { \n      status: 'error', \n      message: 'Scan failed: ' + (error.response?.data?.error || error.message) \n    };\n  }\n},\n// Keep cancelBatchSelection method for batch selection screen\n    cancelBatchSelection() {\n      console.log(\"Cancel batch selection clicked\");\n      \n      // Reset frontend state only (no API call needed)\n      this.batchType = null;\n      this.enteredBatchNumber = '';\n      this.selectedBatch = null;\n      this.workorder = null;\n      this.scannedItems = [];\n      \n      // Remove localStorage\n      localStorage.removeItem('lastBatchType');\n      localStorage.removeItem('lastBatchNumber');\n      \n      // Show first screen (batch type selection)\n      this.showBatchSelection = false;\n      \n      console.log(\"Batch selection cancelled - back to batch type selection\");\n    },\nasync cancelProcess() {\n  try {\n    console.log(\"Cancel button clicked\");\n    const response = await cancelProcess(); // API call\n\n    if (response.status === 'success' && response.data.process_state === 'IDLE') {\n      // Reset full UI to initial state\n      this.status = response.data;\n      this.workorder = null;\n      this.batchType = null;\n      this.enteredBatchNumber = '';\n      this.scannedItems = [];\n      this.scanResult = { status: 'success', message: 'Prescan cancelled successfully. System reset to IDLE.' };\n\n      // Hide prescan panel, show batch selection\n      this.showPrescanning = false;\n      this.showBatchSelection = true;\n\n      // Remove localStorage memory of last batch\n      localStorage.removeItem('lastBatchType');\n      localStorage.removeItem('lastBatchNumber');\n\n      console.log(\"UI reset after cancel: back to batch selection\");\n    } else {\n      this.scanResult = { status: 'error', message: response.message || 'Cancel failed' };\n    }\n  } catch (error) {\n    console.error(\"Cancel API error:\", error);\n    this.scanResult = { status: 'error', message: 'Cancel action failed' };\n  }\n},\n\n\n    initiateAutoTransition() {\n      this.barcode = '';\n      this.scanResult = { status: 'success', message: 'Pre-scanning complete! Transitioning to mixing process...' };\n      this.autoTransitionTimeout = setTimeout(() => {\n        this.confirmPrescan();\n      }, 2000);\n    },\n\n    markPrescanCompleteIfDone() {\n  if (this.scannedItemsCount === this.totalItemsCount) {\n    // Show popup\n    this.showPrescanCompletePopup = true;\n\n   \n\n    this.barcode = \"\";\n  }\n},\ncloseWrongStagePopup() {\n    this.showWrongStagePopup = false;\n    this.wrongStageMessage = '';\n    this.barcode = '';\n    this.$nextTick(() => { \n      if (this.$refs.barcodeInput) this.$refs.barcodeInput.focus(); \n    });\n  },\n  closeDuplicateScanPopup() {\n  this.showDuplicateScanPopup = false;\n  this.duplicateScanMessage = '';\n  this.barcode = '';\n  this.$nextTick(() => { \n    if (this.$refs.barcodeInput) this.$refs.barcodeInput.focus(); \n  });\n},\n\n    startMixing(seconds) {\n      this.mixing = true;\n      this.mixingTimer = seconds;\n      this.mixingProgress = 0;\n\n      this.mixingInterval = setInterval(() => {\n        this.mixingTimer--;\n        this.mixingProgress = Math.floor(((seconds - this.mixingTimer) / seconds) * 100);\n\n        if (this.mixingTimer <= 0) {\n          clearInterval(this.mixingInterval);\n          this.mixing = false;\n          this.actualScanning = true;\n          this.nextStep();\n        }\n      }, 1000);\n    },\n\n    nextStep() {\n      this.currentStepIndex++;\n      this.barcode = \"\";\n    },\n\n    async confirmPrescan() {\n  try {\n    const response = await confirmPrescanAPI();\n    if (response && response.status === 'success') {\n      \n      this.showPrescanCompletePopup = false;\n\n      // force prescan column to \"done\"\n      this.status.prescan_complete = true;\n\n      this.barcode = '';\n\n      \n      let attempts = 0;\n      while (attempts < 15) {\n        await this.updateStatus();\n        if (this.status.process_state === 'WAITING_FOR_ITEMS') {\n          this.scanResult = {\n            status: 'success',\n            message: 'Prescanning completed. Scan the items for the stage 1 mixing process'\n          };\n          break;\n        }\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        attempts++;\n      }\n    } else {\n      const msg = (response && response.message) || 'Failed to confirm pre-scan';\n      this.scanResult = { status: 'error', message: msg };\n    }\n  } catch (err) {\n    console.error('Failed to confirm pre-scan:', err);\n    this.scanResult = { status: 'error', message: 'Failed to confirm pre-scan' };\n  }\n},\n\n    formatTime(seconds) {\n      const mins = Math.floor(seconds / 60)\n      const secs = seconds % 60\n      return `${mins}:${secs.toString().padStart(2, '0')}`\n    },\n\n    formatMixTime(seconds) {\n      if (!seconds && seconds !== 0) return '';\n      const mins = Math.floor(seconds / 60);\n      const secs = seconds % 60;\n      if (mins > 0) {\n        return `${mins}m ${secs}s`;\n      }\n      return `${secs}s`;\n    },\n\n    async loadWorkorders() {\n      try {\n        const response = await getWorkorders()\n        this.workorders = response.workorders || response\n        console.log('Loaded workorders:', this.workorders)\n      } catch (error) {\n        console.error('Failed to load workorders:', error)\n      }\n    },\n\n    updateUIState() {\n      switch (this.status.process_state) {\n        case 'MIXING':\n          this.$nextTick(() => console.log('Mixing state active'));\n          break;\n        case 'WAITING_FOR_ITEMS':\n          this.$nextTick(() => {\n            if (this.$refs.actualBarcodeInput) this.$refs.actualBarcodeInput.focus();\n            console.log('Waiting for items, focusing scanner');\n          });\n          break;\n        case 'PRESCANNING':\n          this.showPrescanning = true;\n          this.updatePrescanProgress();\n          this.$nextTick(() => { if (this.$refs.barcodeInput) this.$refs.barcodeInput.focus(); });\n          break;\n        default:\n          //this.showPrescanning = false;\n      }\n    },\n\n    async checkAndTriggerTransitions() {\n      try {\n        if (this.status.process_state === 'WAITING_FOR_LID_CLOSE' ||\n            this.status.process_state === 'WAITING_FOR_MOTOR_START') {\n          const result = await checkTransitions()\n          if (result && result.status === 'success') {\n            await this.updateStatus()\n          }\n        }\n      } catch (error) {\n        console.error('Transition check failed:', error)\n      }\n    },\n\n    async updateStatus() {\n  try {\n    const newStatus = await getStatus()\n    this.status = newStatus\n    \n    if (newStatus.process_state === 'PRESCAN_COMPLETE' && !this.showPrescanCompletePopup) {\n      this.showPrescanCompletePopup = true;\n    }\n\n    if (newStatus.process_state === 'WAITING_FOR_ITEMS') {\n      this.$nextTick(() => { \n        if (this.$refs.barcodeInput) this.$refs.barcodeInput.focus(); \n      });\n    }\n\n    if (this.showPrescanning && newStatus.process_state === 'WAITING_FOR_ITEMS') {\n      this.showPrescanning = true;\n    }\n\n    // FIX: Add safety check to prevent premature completion detection\n    if (newStatus.just_completed || newStatus.process_state === 'PROCESS_COMPLETE') {\n      // Only show save popup if we're actually on the last step\n      const isLastStep = newStatus.current_step_index >= newStatus.total_steps - 1;\n      const allStepsDone = newStatus.steps && newStatus.steps.every(step => \n        step.items.every(item => item.live_status === 'DONE')\n      );\n      \n      if (!this.hasShownSavePopup && isLastStep && allStepsDone) {\n            console.log(\"Process complete detected -> showing SAVE popup (once per batch)\");\n            this.showSavePopup = true;\n            this.hasShownSavePopup = true;   // \n          }\n        }\n\n\n  } catch (error) {\n    console.error('Failed to update status:', error)\n    this.status = {\n      ...this.status,\n      error_message: 'Failed to update status'\n    }\n  }\n},\nshouldBlink(stepIndex) {\n    return stepIndex === this.blinkingStageIndex;\n  },\n\n   getStepStatus(stepIndex) {\n  // During PRESCANNING  keep using backend prescan_status\n  if (this.status.process_state === 'PRESCANNING') {\n    if (this.status.prescan_status && this.status.prescan_status.status_by_stage) {\n      const stage = this.status.prescan_status.status_by_stage[stepIndex + 1];\n      if (stage && stage.live_status) {\n        return stage.live_status.toLowerCase();\n      }\n    }\n    return 'waiting';\n  }\n\n  // After prescan  drive from actual scanning/mixing state\n  if (this.status.process_state === 'WAITING_FOR_ITEMS') {\n    if (stepIndex < this.status.current_step_index) {\n      return 'done'; // already completed step\n    }\n    if (stepIndex === this.status.current_step_index) {\n      return 'in-progress'; // current step waiting for items\n    }\n    return 'waiting'; // future steps\n  }\n\n  if (this.status.process_state === 'MIXING') {\n    if (stepIndex === this.status.current_step_index) {\n      return 'mixing';\n    }\n    if (stepIndex < this.status.current_step_index) {\n      return 'done';\n    }\n    return 'waiting';\n  }\n\n  if (this.status.process_state === 'PROCESS_COMPLETE') {\n    return 'done';\n  }\n\n  return 'waiting';\n},\n// Check if a specific step has items in READY_TO_LOAD state\nisStepReadyToLoad(stepIndex) {\n  if (stepIndex < 0 || stepIndex >= this.status.steps.length || !this.status.steps) return false;\n  \n  const step = this.status.steps[stepIndex];\n  if (!step || !step.items || step.items.length === 0) return false;\n  \n  // Check if all items in the step are READY_TO_LOAD\n  return step.items.every(item => item.live_status === 'READY_TO_LOAD');\n},\n\n\n    startPolling() {\n      this.statusInterval = setInterval(this.updateStatus, 1000)\n      this.transitionInterval = setInterval(this.checkAndTriggerTransitions, 2000)\n    },\n\n    stopPolling() {\n      if (this.statusInterval) { clearInterval(this.statusInterval); this.statusInterval = null; }\n      if (this.transitionInterval) { clearInterval(this.transitionInterval); this.transitionInterval = null; }\n    },\n\n    async handleScan() {\n  if (!this.barcode.trim()) return;\n  console.log(\"Sending scan:\", this.barcode.trim());\n\n  try {\n    const result = await scanItem(this.barcode.trim());\n\n    if (result.error) {\n      this.scanResult = { status: 'error', message: 'Scan failed: ' + result.error };\n    } else if (result.status === 'fail') {\n      // Show wrong stage popup\n      if (\n          result.message && \n          (result.message.includes('does not belong to this stage') || \n          result.message.includes('does not belong to this or next step'))\n        ) {\n          // Check if this is early scanning (mixing state)\n          if (this.status.process_state === 'MIXING') {\n            const nextStageNumber = this.status.current_step_index + 2;\n            this.earlyScanningWrongItemMessage = `This item does not belong to Stage ${nextStageNumber}. Please scan the correct item for the next stage.`;\n            this.showEarlyScanningWrongItemPopup = true;\n          } else {\n            this.wrongStageMessage = \"Item does not belong to this stage\";\n            this.showWrongStagePopup = true;\n          }\n          this.scanResult = null;\n          this.barcode = '';\n        } else {\n          this.scanResult = { status: 'error', message: result.message };\n        }\n      }else {\n      // Success case\n      const stepIndex = this.status.current_step_index;\n      const isMixing = this.status.process_state === 'MIXING';\n\n      let allowedStepIndexes = isMixing ? [stepIndex + 1] : [stepIndex];\n\n      const allowedItems = allowedStepIndexes.flatMap(\n        idx => this.workorder.steps[idx]?.items.map(i => i.item_id) || []\n      );\n\n      // Check if scanned item belongs to allowed items\n      if (!allowedItems.includes(this.barcode.trim())) {\n        // Check if this is early scanning (mixing state)\n        if (isMixing) {\n          const nextStageNumber = this.status.current_step_index + 2;\n          this.earlyScanningWrongItemMessage = `Invalid item for Stage ${nextStageNumber}`;\n          this.showEarlyScanningWrongItemPopup = true;\n        } else {\n          this.wrongStageMessage = 'Invalid item for this stage';\n          this.showWrongStagePopup = true;\n        }\n        this.scanResult = null;\n        this.barcode = '';\n        return;\n      }\n\n      // Success\n      this.scanResult = result;\n      if (result.status === 'success') {\n        this.barcode = '';\n        this.$nextTick(() => {\n          if (this.$refs.barcodeInput) this.$refs.barcodeInput.focus();\n        });\n        await this.updateStatus();\n      }\n    }\n  } catch (error) {\n    console.error('Failed to scan item:', error);\n    this.scanResult = {\n      status: 'error',\n      message: 'Scan failed: ' + (error.response?.data?.error || error.message)\n    };\n  }\n},\n    async abortProcess() {\n    this.showAbortConfirmationPopup = true;\n  },\n\n  // Add new methods for confirmation handling\n  async confirmAbort() {\n    try {\n      this.showAbortConfirmationPopup = false;\n      // Call the actual abort API\n      await abortProcess();\n      this.scanResult = { \n        status: 'success', \n        message: 'Process aborted successfully' \n      };\n    } catch (error) {\n      console.error('Failed to abort process:', error);\n      this.scanResult = { \n        status: 'error', \n        message: 'Failed to abort process' \n      };\n    }\n  },\n\n  cancelAbort() {\n    this.showAbortConfirmationPopup = false;\n    this.scanResult = { \n      status: 'info', \n      message: 'Abort cancelled - process continues' \n    };\n  },\n\n    async resumeProcess() {\n      try {\n        await resumeProcess()\n      } catch (error) {\n        console.error('Failed to resume process:', error)\n      }\n    },\n    async handleSaveWorkorder() {\n  try {\n    const response = await saveWorkorder();\n    if (response.status === 'success') {\n      console.log('Workorder saved successfully:', response.message);\n      this.scanResult = { status: 'success', message: 'Workorder saved successfully!' };\n      this.showSavePopup = false;\n      this.showCompletionPopup = true;\n      this.hasShownCompletionPopup = true;\n    } else {\n      console.warn('Failed to save workorder:', response.message);\n      this.scanResult = { status: 'error', message: response.message || 'Failed to save workorder' };\n      // Don't proceed to completion popup if save failed\n    }\n  } catch (err) {\n    console.error('Save workorder API failed:', err);\n    this.scanResult = { status: 'error', message: 'Error saving workorder' };\n  }\n},\n\n\n\n    \n    confirmProcessComplete() {\n  this.showProcessCompletePopup = false;\n  this.status.process_state = 'IDLE';\n  this.showBatchSelection = true;\n  this.showPrescanning = false;\n  this.workorder = null;\n  this.enteredBatchNumber = '';\n},\n\n\n    pollStatus() {\n      this.interval = setInterval(() => {\n        getStatus().then(data => {\n          console.log('Polled status:', data);\n          this.status = data;\n          this.updateUIState();\n        }).catch(error => console.error('Polling error:', error));\n      }, 1000);\n    },\n\n   async handleCompletionOk() {\n  try {\n    const response = await confirmCompletion()\n    if (response.status === 'success') {\n      this.showCompletionPopup = false\n      this.status = { process_state: 'IDLE' }\n      this.batchType = null\n      localStorage.removeItem('lastBatchType');\n      localStorage.removeItem('lastBatchNumber');\n      this.showBatchSelection = true\n      this.showPrescanning = false\n      this.workorder = null\n      this.enteredBatchNumber = ''\n      this.hasShownSavePopup = false\n      this.hasShownCompletionPopup = false\n    } else {\n      console.error(\"Completion confirm failed:\", response.message)\n    }\n  } catch (err) {\n    console.error('Failed to reset process after completion:', err)\n  }\n}\n\n\n  }\n}\n</script>\n\n<style scoped>\n.login-screen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  gap: 10px;\n}\n.login-screen input {\n  padding: 8px;\n  width: 220px;\n  font-size: 1rem;\n}\n.login-screen button {\n  padding: 8px 12px;\n  font-size: 1rem;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 4px;\n}\n\n/* Add styles for the automatic transition message */\n.batch-option {\n  border: 2px solid #007bff;\n  border-radius: 8px;\n  padding: 2rem;\n  cursor: pointer;\n  font-size: 1.2rem;\n  font-weight: bold;\n  text-align: center;\n  width: 180px;\n  transition: 0.2s;\n}\n.batch-option:hover {\n  background-color: #007bff;\n  color: white;\n  transform: translateY(-3px);\n}\n\n.auto-transition-message {\n  margin-top: 1rem;\n  padding: 1rem;\n  background-color: #d4edda;\n  color: #155724;\n  border-radius: 4px;\n  text-align: center;\n}\n.prescan-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 1rem;\n  text-align: center;\n  border: 2px solid #333; \n}\n\n.prescan-table th,\n.prescan-table td {\n  border: 2px solid #333;\n  padding: 10px;\n  font-size: 0.95rem;\n}\n\n.prescan-table th {\n  background-color: #f0f0f0; \n  font-weight: bold;\n  color: #333; \n}\n\n.prescan-table td {\n  background-color: #fff;\n}\n\n.prescan-table tr:nth-child(even) td {\n   background-color: #f8f8f8;\n}\n\n.batch-panel { background-color: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 1rem;border: 2px solid #333; /* Add darker border */ }\n.batch-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; }\n.batch-item { border: 1px solid #ddd; border-radius: 4px; padding: 1rem; cursor: pointer; transition: background-color 0.2s; }\n.batch-item:hover { background-color: #f5f5f5; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }\n.batch-name { font-weight: bold; margin-bottom: 0.5rem; }\n.batch-number { color: #666; font-size: 0.9rem; }\n.prescan-panel { background-color: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 1rem;border: 2px solid #333; /* Add darker border */\n} \n.progress { height: 20px; background-color: #f5f5f5; border-radius: 4px; margin-bottom: 1rem; position: relative; }\n.progress-bar { height: 100%; background-color: #28a745; border-radius: 4px; transition: width 0.3s; }\n.progress-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #333; font-weight: bold; }\n.items-list { margin-bottom: 1.5rem; }\n.items-list h3 { margin-top: 1rem; margin-bottom: 0.5rem; }\n.item { display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; border-bottom: 1px solid #eee; }\n.item.scanned { background-color: #d4edda; }\n.item.pending { background-color: #fff3cd; }\n.item-name { font-weight: bold; }\n.item-id { color: #666; font-size: 0.9rem; }\n.status-indicator { font-weight: bold; }\n.status-indicator.scanned { color: #28a745; }\n.status-indicator.pending { color: #ffc107; }\n.confirmation-dialog { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); display:flex; justify-content:center; align-items:center; z-index:1000; }\n.dialog-content { background-color: white; padding: 2rem; border-radius: 8px; text-align:center; max-width: 400px; width: 100%; }\n.dashboard { display:flex; flex-direction:column; gap:1rem; max-width:600px; margin:0 auto; padding:1rem; }\n.status-panel { background-color: white; border-radius:8px; padding:1rem; box-shadow:0 2px 4px rgba(0,0,0,0.1);border: 2px solid #333; /* Add darker border */ }\n.status-info { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:1rem; margin-bottom:1rem; }\n.status-item { display:flex; flex-direction:column; }\n.label { font-weight:bold; margin-bottom:0.25rem; color:#666; }\n.value { font-size:1.1rem; }\n.open { color:#dc3545; }\n.closed { color:#28a745; }\n.running { color:#28a745; }\n.stopped { color:#6c757d; }\n.control-buttons { display:flex; gap:0.5rem; }\n.btn { padding:0.6rem 1.2rem; border:2px solid transparent; border-radius:6px; cursor:pointer; font-size:1rem;font-weight: 600;\n  transition: all 0.3s ease; }\n.btn-danger { background-color:#dc3545; color:white;border-color: #c82333; }\n.btn-warning { background-color:#ffc107; color:black; }\n.scanner-panel { background-color:white; border-radius:8px; padding:1.5rem; box-shadow:0 2px 4px rgba(0,0,0,0.1);border: 1px solid #ccc; /* Add darker border */ }\n.scanner-panel.centered { text-align:center; }\n.scanner-input { margin-bottom:1rem; }\n.scanner-input input { width:100%; padding:0.75rem; border:2px solid #ddd; border-radius:4px; font-size:1.1rem; text-align:center; }\n.scanner-input input:focus { border-color:#007bff; outline:none; }\n.scanner-input input:disabled { background-color:#f5f5f5; cursor:not-allowed; }\n.scan-result { padding:0.75rem; border-radius:4px; text-align:center; font-weight:bold; margin-bottom:1rem; }\n.scan-result.success { background-color:#d4edda; color:#155724; border:1px solid #c3e6cb; }\n.scan-result.fail { background-color:#f8d7da; color:#721c24; border:1px solid #f5c6cb; }\n.scan-result.error { background-color:#fff3cd; color:#856404; border:1px solid #ffeeba; }\n.idle-message, .waiting-message { margin-top:1rem; color:#6c757d; font-style:italic; text-align:center; }\n.debug-info { background-color:#f8f9fa; border:1px solid #dee2e6; border-radius:4px; padding:1rem; margin-top:1rem; }\n.debug-info h3 { margin-top:0; color:#6c757d; }\n.confirmation-dialog {\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display:flex;\n  justify-content:center;\n  align-items:center;\n  z-index:1000;\n}\n.completion-popup {\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5); \n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.completion-popup .popup-content {\n  background: white;\n  padding: 2rem;\n  border-radius: 10px;\n  text-align: center;\n  max-width: 400px;\n  width: 100%;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.3);\n  border: 2px solid #333;\n}\n/* Abort confirmation specific styling */\n.confirmation-dialog .dialog-content {\n  background: white;\n  padding: 2rem;\n  border-radius: 10px;\n  text-align: center;\n  max-width: 400px;\n  width: 100%;\n  box-shadow: 0 4px 20px rgba(0,0,0,0.3);\n  border: 2px solid #dc3545; \n}\n\n.confirmation-dialog h3 {\n  color: #dc3545;\n  margin-bottom: 1rem;\n}\n\n.confirmation-dialog p {\n  margin-bottom: 1.5rem;\n  font-size: 1.1rem;\n}\n\n.confirmation-dialog .btn-danger {\n  background-color: #dc3545;\n  border-color: #c82333;\n  padding: 0.6rem 1.5rem;\n}\n\n.confirmation-dialog .btn-primary {\n  background-color: #007bff;\n  border-color: #0069d9;\n  padding: 0.6rem 1.5rem;\n}\n\n\n.status-line {\n  margin-top: 1rem;\n  padding: 0.75rem 1rem;\n  text-align: center;\n  background-color:#e8f5e8;    /* light green */\n  color: #155724;              /* dark green text */\n  border: 2px solid #28a745;   /* green border */\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 600;\n}\n\n/* Blinking highlight styles - FIXED VERSION */\n.blinking-highlight {\n  animation: blinking 1s infinite;\n}\n\n@keyframes blinking {\n  0% { background-color: yellow; }\n  50% { background-color: #ffff99; } /* slightly lighter yellow */\n  100% { background-color: yellow; }\n}\n\n\n.prescan-table tr.blinking-highlight td {\n  animation: blinking 1s infinite !important;\n}\n\n.btn-debug { background-color:#6c757d; color:white; padding:0.25rem 0.5rem; border:none; border-radius:4px; font-size:0.8rem; margin-top:1rem; }\n/* Login Screen Styles */\n.batch-panel {\n  background-color: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  border: 2px solid #e5e7eb;\n}\n\n/* Make the login container more prominent */\n.min-h-screen {\n  min-height: 100vh;\n}\n\n/* Larger input fields */\n.batch-panel input {\n  font-size: 1.1rem;\n}\n\n/* Blue button enhancements */\n.batch-panel button:not(:disabled):hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 12px rgba(59, 130, 246, 0.3);\n}\n\n.batch-panel button:active:not(:disabled) {\n  transform: translateY(0);\n}\n.btn-warning {\n  background-color: #ffc107;\n  color: black;\n  border: 2px solid #e0a800;\n}\n\n.btn-warning:hover {\n  background-color: #e0a800;\n  transform: translateY(-1px);\n}\n/* Login Screen Styles */\n.login-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start; /* Changed from center to flex-start */\n  min-height: 100vh;\n  background-color: #f8f9fa;\n  padding: 2rem;\n  padding-top: 4rem; /* Added top padding to move card down slightly from top */\n}\n\n.login-card {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  padding: 3rem;\n  max-width: 400px;\n  width: 100%;\n  border: 2px solid #060606;\n  /* Remove any margin that might be pushing it down */\n  margin: 0;\n}\n\n.login-header {\n  text-align: center;\n  margin-bottom: 2.5rem;\n}\n\n.login-title {\n  font-size: 1.8rem;\n  font-weight: 600;\n  color: #2c3e50;\n  margin-bottom: 0.5rem;\n}\n\n.login-subtitle {\n  color: #101111;\n  font-size: 1rem;\n  margin: 0;\n}\n\n.login-form {\n  space-y: 1.5rem;\n}\n\n.input-group {\n  margin-bottom: 1.5rem;\n}\n\n.input-label {\n  display: block;\n  font-weight: 500;\n  color: #495057;\n  margin-bottom: 0.5rem;\n  font-size: 0.95rem;\n}\n\n.form-input {\n  width: 100%;\n  padding: 0.875rem 1rem;\n  border: 2px solid #e9ecef;\n  border-radius: 8px;\n  font-size: 1rem;\n  transition: all 0.2s ease;\n  background: white;\n  box-sizing: border-box;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: #007bff;\n  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);\n}\n\n.form-input::placeholder {\n  color: #6c757d;\n}\n\n.button-container {\n  margin-top: 2rem;\n  display: flex;\n  justify-content: center;\n}\n\n.login-button {\n  background: #007bff;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  padding: 0.875rem 2rem;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-width: 120px;\n}\n\n.login-button:hover:not(.login-button-disabled) {\n  background: #0056b3;\n  transform: translateY(-1px);\n}\n\n.login-button:active:not(.login-button-disabled) {\n  transform: translateY(0);\n}\n\n.login-button-disabled {\n  background: #6c757d;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.error-message {\n  background: #f8d7da;\n  border: 1px solid #f5c6cb;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-top: 1.5rem;\n  text-align: center;\n}\n\n.error-text {\n  color: #721c24;\n  margin: 0;\n  font-weight: 500;\n  font-size: 0.95rem;\n}\n\n/* Responsive Design */\n@media (max-width: 480px) {\n  .login-container {\n    padding: 1rem;\n    padding-top: 3rem; /* Slightly less top padding on mobile */\n  }\n  \n  .login-card {\n    padding: 2rem 1.5rem;\n  }\n  \n  .login-title {\n    font-size: 1.5rem;\n  }\n}\n/* Password Input Container */\n.password-input-container {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.password-input {\n  padding-right: 80px; /* Make space for the toggle button */\n}\n\n.password-toggle {\n  position: absolute;\n  right: 8px;\n  top: 50%;\n  transform: translateY(-50%);\n  background: #f8f9fa;\n  border: 1px solid #dee2e6;\n  border-radius: 4px;\n  padding: 4px 8px;\n  font-size: 0.8rem;\n  color: #495057;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.password-toggle:hover {\n  background: #e9ecef;\n  border-color: #adb5bd;\n}\n\n.password-toggle:active {\n  background: #dee2e6;\n}\n\n.toggle-text {\n  font-weight: 500;\n  font-size: 0.8rem;\n}\n\n/* Ensure the password input doesn't get hidden behind the toggle */\n.form-input:focus {\n  padding-right: 80px; /* Maintain space when focused */\n}\n\n/* Responsive adjustments */\n@media (max-width: 480px) {\n  .password-input {\n    padding-right: 70px;\n  }\n  \n  .password-toggle {\n    padding: 4px 6px;\n    font-size: 0.75rem;\n  }\n  \n  .form-input:focus {\n    padding-right: 70px;\n  }\n}\n\n</style>","import axios from 'axios';\n\n//const API_BASE_URL = 'https://shera-undefensible-pseudoindependently.ngrok-free.dev';\nconst API_BASE_URL =\"http://192.168.0.108:5000\";\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  withCredentials: true,\n  timeout: 90000,\n});\n\n// === Automatically attach JWT token ===\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// === Handle token expiry ===\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response && error.response.status === 401) {\n      console.warn('Token expired or invalid  logging out');\n      localStorage.removeItem('token');\n      window.location.reload();\n    }\n    console.error('API Error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// === AUTH ===\nexport const login = async (username, password) => {\n  const res = await api.post('/api/login', {\n    usr: username,\n    pwd: password\n  })\n  return res.data\n}\n\nexport const getStatus = () => api.get('/api/status').then(r => r.data);\nexport const scanItem = (barcode) => api.post('/api/scan', { barcode }).then(r => r.data);\nexport const abortProcess = () => api.post('/api/abort').then(r => r.data);\nexport const resumeProcess = () => api.post('/api/resume').then(r => r.data);\n\nexport const completeAbortProcess = () =>\n  api.post('/api/complete_abort')\n    .then(r => r.data)\n    .catch(() => ({ status: 'error', message: 'API call failed' }));\n\nexport const cancelProcess = () =>\n  api.post('/api/cancel')\n    .then(r => r.data)\n    .catch(() => ({ status: 'error', message: 'Cancel API call failed' }));\n\nexport const resetProcess = () => api.post('/api/reset').then(r => r.data);\nexport const getWorkorders = () => api.get('/api/workorders').then(r => r.data);\nexport const checkTransitions = () => api.get('/api/check_transitions').then(r => r.data);\n\nexport const getBatches = (batchNumber = '') => {\n  const url = batchNumber ? `/api/batches/${batchNumber}` : '/batches';\n  return api.get(url).then(r => r.data);\n};\n\n// updated: call the working endpoint and return .data\nexport const loadWorkorder = ({ batch_no }) =>\n  api.post('/api/find_mixing_sequence', { batch_no })\n     .then(r => r.data)\n     .catch(err => { throw err })\n\n\nexport const confirmCompletion = () =>\n  api.post('/api/confirm_completion')\n    .then(r => r.data)\n    .catch(() => ({ status: 'error', message: 'Failed to confirm completion' }));\n\nexport const prescanItem = (barcode) => api.post('/api/prescan', { barcode }).then(r => r.data);\n\nexport const saveWorkorder = () =>\n  api.post('/api/save_workorder')\n    .then(r => r.data)\n    .catch(() => ({ status: 'error', message: 'Failed to save workorder' }));\n\nexport const confirmPrescanAPI = () => api.post('/api/confirm_prescan').then(r => r.data);\n// === ERPNext Integration ===\nexport const getERPWorkorders = () =>\n  api.get('/api/erp/workorders').then(r => r.data);\n\nexport const getERPBOM = (bomName) =>\n  api.get(`/api/erp/bom/${bomName}`).then(r => r.data);\n\nexport const updateERPWorkorder = (workOrder, status = 'Completed', actualQty = 0) =>\n  api.post('/api/erp/update_workorder', { work_order: workOrder, status, actual_qty: actualQty })\n     .then(r => r.data);\n\nexport const createERPBatch = (batchId, item, manufacturingDate) =>\n  api.post('/api/erp/create_batch', { batch_id: batchId, item, manufacturing_date: manufacturingDate })\n     .then(r => r.data);\n\n\nexport default api;\n","import { render } from \"./Dashboard.vue?vue&type=template&id=42210c66&scoped=true\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js\"\n\nimport \"./Dashboard.vue?vue&type=style&index=0&id=42210c66&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-42210c66\"]])\n\nexport default __exports__","import { createRouter, createWebHashHistory } from 'vue-router'\nimport Dashboard from '../views/Dashboard.vue'\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Dashboard',\n    component: Dashboard\n  }\n]\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n})\n\nexport default router\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\ncreateApp(App).use(router).mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkkneader_ui\"] = self[\"webpackChunkkneader_ui\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], () => (__webpack_require__(772)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","src","alt","name","__exports__","render","style","token","batchType","status","process_state","showCancelConfirmation","type","placeholder","loadBatchByNumber","ref","enteredBatchNumber","logout","selectBatchType","confirmCancelBatchSelection","cancelCancelBatchSelection","workorder","steps","selectedBatch","showCancelProcessConfirmation","disabled","isCancelDisabled","confirmCancelProcess","cancelCancelProcess","getStatusMessage","step","stepIndex","step_id","isNextStep","rowspan","items","length","item_id","current_step_index","formatMixTime","mix_time_sec","mixing_time_remaining","getItemStatus","toUpperCase","fontWeight","live_status","slice","item","key","handlePrescan","barcode","handleScan","includes","abortProcess","resumeProcess","completeAbortProcess","wrongStageMessage","closeWrongStagePopup","earlyScanningWrongItemMessage","closeEarlyScanningWrongItemPopup","duplicateScanMessage","closeDuplicateScanPopup","confirmPrescan","wrongItemMessage","closeWrongItemPopup","confirmAbort","cancelAbort","handleSaveWorkorder","handleCompletionOk","for","login","username","showPassword","password","error","API_BASE_URL","api","axios","create","baseURL","withCredentials","timeout","interceptors","request","use","config","localStorage","getItem","headers","Authorization","Promise","reject","response","console","warn","removeItem","window","location","reload","async","res","post","usr","pwd","data","getStatus","get","then","r","scanItem","catch","message","cancelProcess","getWorkorders","checkTransitions","getBatches","batchNumber","url","loadWorkorder","batch_no","err","confirmCompletion","prescanItem","saveWorkorder","confirmPrescanAPI","showLogin","kneaderStatus","showSavePopup","showEarlyScanningWrongItemPopup","showAbortConfirmationPopup","showPrescanCompletePopup","showCompletionPopup","showWrongItemPopup","showWrongStagePopup","showConfirmPopup","batches","showBatchSelection","showPrescanning","prescanResults","showDuplicateScanPopup","prescanComplete","actualScanning","mixing","mixingTimer","mixingInterval","scannedItems","lid_open","motor_running","current_item_index","error_message","workorder_id","total_steps","workorders","currentWorkorder","scanResult","debugMode","statusInterval","transitionInterval","showingCompletion","autoTransitionTimeout","hasShownSavePopup","hasShownCompletionPopup","computed","scannedItemsCount","this","currentStepItems","showCancelButton","showStates","disabledStates","totalItemsCount","reduce","total","prescanProgress","Math","round","canScan","blinkingStageIndex","mounted","log","savedType","savedBatch","statusResp","parseSeconds","mixingTime","floor","m","String","match","parseInt","workorder_name","sequence_steps","map","s","idx","mixing_time","it","required_weight","workorder_type","loadBatches","loadWorkorders","startPolling","$nextTick","$refs","batchInput","focus","barcodeInput","beforeUnmount","clearTimeout","stopPolling","watch","newState","setTimeout","newVal","trim","setItem","initiateAutoTransition","methods","updateStatus","showCancelConfirmationPopup","isStepFullyScanned","every","currentStage","nextStage","isStepReadyToLoad","getRemainingReadyTime","bn","msg","returnedBatch","batch_number","itemId","prescan_status","status_by_stage","stage","find","i","toLowerCase","getActualItemStatus","scanned_items","currentItem","prescan_complete","result","push","markPrescanCompleteIfDone","cancelBatchSelection","startMixing","seconds","mixingProgress","setInterval","clearInterval","nextStep","currentStepIndex","attempts","resolve","formatTime","mins","secs","toString","padStart","updateUIState","actualBarcodeInput","updatePrescanProgress","checkAndTriggerTransitions","newStatus","just_completed","isLastStep","allStepsDone","shouldBlink","getStepStatus","nextStageNumber","isMixing","allowedStepIndexes","allowedItems","flatMap","confirmProcessComplete","showProcessCompletePopup","pollStatus","interval","routes","path","component","Dashboard","router","history","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","splice","d","definition","o","defineProperty","enumerable","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}